{% extends 'theme/base.html' %}
{% load static %}

{% block content %}
<div class="w-full min-h-screen bg-gradient-to-b from-base-100 to-base-200">
  <div class="max-w-4xl mx-auto px-4 py-12">

    <!-- Header Section -->
    <article class="bg-base-100 rounded-2xl shadow-xl overflow-hidden">

      <!-- Featured Image -->
      {% if blogpost.image %}
        <div class="w-full h-96 overflow-hidden">
          <img src="{{ blogpost.image.url }}" alt="{{ blogpost.title }}"
               class="w-full h-full object-cover">
        </div>
      {% endif %}

      <!-- Content Container -->
      <div class="px-8 py-10 md:px-12 md:py-14">

        <!-- Meta Badges -->
        <div class="flex items-center gap-2 mb-6">
          {% if blogpost.status == 'published' %}
            <span class="badge badge-success badge-lg">Published</span>
          {% else %}
            <span class="badge badge-warning badge-lg">Draft</span>
          {% endif %}
          {% if blogpost.topic %}
            <span class="badge badge-outline badge-lg">{{ blogpost.topic }}</span>
          {% endif %}
        </div>

        <!-- Title -->
        <h1 class="text-4xl md:text-5xl font-bold mb-6 leading-tight text-base-content">
          {{ blogpost.title }}
        </h1>

        <!-- Metadata Bar -->
        <div class="flex flex-wrap items-center gap-6 text-sm text-base-content/70 mb-10 pb-8 border-b border-base-300">
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            <time datetime="{{ blogpost.created_at|date:'Y-m-d' }}">
              {{ blogpost.created_at|date:"F d, Y" }}
            </time>
          </span>
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            {{ blogpost.get_reading_time }} min read
          </span>
          {% if blogpost.updated_at != blogpost.created_at %}
            <span class="flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Updated {{ blogpost.updated_at|date:"M d, Y" }}
            </span>
          {% endif %}
        </div>

        <!-- Blog Content -->
        <div class="prose prose-lg max-w-none
                    prose-headings:font-bold prose-headings:text-base-content
                    prose-p:text-base-content/90 prose-p:leading-relaxed
                    prose-a:text-primary prose-a:no-underline hover:prose-a:underline
                    prose-strong:text-base-content prose-strong:font-semibold
                    prose-code:text-secondary prose-code:bg-base-200 prose-code:px-1 prose-code:py-0.5 prose-code:rounded
                    prose-pre:bg-base-300 prose-pre:text-base-content
                    prose-blockquote:border-l-4 prose-blockquote:border-primary prose-blockquote:italic
                    prose-img:rounded-xl prose-img:shadow-lg
                    prose-li:text-base-content/90">
          {% if blogpost.content %}
            {{ blogpost.content|safe }}
          {% else %}
            <p class="text-base-content/60 italic">No content available.</p>
          {% endif %}
        </div>

      </div>
    </article>

    <!-- Action Buttons -->
    {% if user.is_superuser %}
      <div class="flex gap-4 justify-center mt-8">
        <a href="{% url 'blog:blogpost-update' blogpost.slug %}" class="btn btn-neutral">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
          </svg>
          Edit Post
        </a>
        <a href="{% url 'blog:blogpost-delete' blogpost.slug %}" class="btn btn-error btn-outline">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
          Delete Post
        </a>
      </div>
    {% endif %}

  </div>
</div>
{% endblock %}
