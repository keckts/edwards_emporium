
{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{{ project_name }}{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% tailwind_css %}

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.5/dist/cdn.min.js"></script>

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- Dark Mode Script -->
    <script>
        (function() {
            const darkMode = localStorage.getItem('darkMode') === 'true';
            document.documentElement.setAttribute('data-theme', darkMode ? 'dark' : 'light');
        })();
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
<div class="drawer drawer-open">
  <input id="my-drawer-4" type="checkbox" class="drawer-toggle" />
  <div class="drawer-content p-4">
    {% block content %}{% endblock %}
  </div>

  <div class="drawer-side is-drawer-close:overflow-visible">
    <label for="my-drawer-4" class="drawer-overlay" aria-label="close sidebar"></label>
    <div class="is-drawer-close:w-14 is-drawer-open:w-64 bg-base-200 flex flex-col items-start min-h-full">
      <ul class="menu w-full grow">

        {# Dashboard #}
        <li>
          <a href="{% url 'dashboard' %}" class="is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="Dashboard">
            {% include 'theme/_icon.html' with svg="<path d='M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8'></path><path d='M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z'></path>" hover=True %}
            <span class="is-drawer-close:hidden">Dashboard</span>
          </a>
        </li>

        {# Browse Antiques #}
        <li>
          <a href="{% url 'antiques:antique-list' %}" class="is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="Browse Antiques">
            {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z'>" hover=True %}
            <span class="is-drawer-close:hidden">Browse Antiques</span>
          </a>
        </li>

        {# Wishlist #}
        {% if user.is_authenticated %}
        <li>
          <a href="{% url 'antiques:wishlist-list' %}" class="is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="My Wishlists">
            {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M4.318 6.318a4.5 4.5 0 0 0 0 6.364L12 20.364l7.682-7.682a4.5 4.5 0 0 0-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 0 0-6.364 0z'>" hover=True %}
            <span class="is-drawer-close:hidden">My Wishlists</span>
          </a>
        </li>

        {# My Orders #}
        <li>
          <a href="{% url 'payments:order_list' %}" class="is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="My Orders">
            {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z'>" hover=True %}
            <span class="is-drawer-close:hidden">My Orders</span>
          </a>
        </li>

        {% endif %}

        {% if user.seller %}
        {# Seller Dashboard #}

        <li>
          <a href="{% url 'sellers:seller-dashboard' %}" class="is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="Seller Dashboard">
            {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z' />" hover=True %}
            <span class="is-drawer-close:hidden">Seller Dashboard</span>
          </a>
        </li>

{% endif %}





<li>
  <a href="{% url 'blog:blogpost-list' %}" class="is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="Blog">
    {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253'/>" hover=True %}
    <span class="is-drawer-close:hidden">Blog</span>
  </a>
</li>

        {# More Section #}
        <li class="is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="More">
          <div id="more-toggle" class="cursor-pointer flex items-center">
            {% include 'theme/_icon.html' with svg="<circle cx='12' cy='12' r='1'></circle><circle cx='12' cy='5' r='1'></circle><circle cx='12' cy='19' r='1'></circle>" hover=True %}
            <span class="is-drawer-close:hidden flex-1">More</span>
            <svg id="more-chevron" class="is-drawer-close:hidden w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7 7"></path>
            </svg>
          </div>

          <ul id="more-menu" class="is-drawer-close:hidden overflow-hidden transition-all duration-200" style="max-height: 0;">

            {% if user.is_authenticated %}
            <li>
              <a href="{% url 'users:settings' %}" class="pl-8">
                {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z'></path><path stroke-linecap='round' stroke-linejoin='round' d='M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z'></path>" hover=True %}
                <span>Settings</span>
              </a>
            </li>
            {% endif %}

            <li>
              <a href="{% url 'about' %}" class="pl-8">
                {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z'></path>" hover=True %}
                <span>About Us</span>
              </a>
            </li>

            <li>
              <a href="{% url 'privacy-policy' %}" class="pl-8">
                {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z'></path>" hover=True %}
                <span>Privacy Policy</span>
              </a>
            </li>

            <li>
              <a href="{% url 'terms-of-service' %}" class="pl-8">
                {% include 'theme/_icon.html' with svg="<path stroke-linecap='round' stroke-linejoin='round' d='M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z'></path>" hover=True %}
                <span>Terms & Conditions</span>
              </a>
            </li>
          </ul>
        </li>

      </ul>

      {# Drawer toggle button #}
      <div class="m-2 is-drawer-close:tooltip is-drawer-close:tooltip-right" data-tip="Open">
        <label for="my-drawer-4" class="btn btn-ghost btn-circle drawer-button is-drawer-open:rotate-y-180">
          {% include 'theme/_icon.html' with svg="<path d='M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z'></path><path d='M9 4v16'></path><path d='M14 10l2 2l-2 2'></path>" hover=True %}
        </label>
      </div>
    </div>
  </div>
</div>

<style>
.icon-hover:hover {
  @apply text-primary scale-110 transition-transform duration-200;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  // More menu toggle
  const moreToggle = document.getElementById('more-toggle');
  const moreMenu = document.getElementById('more-menu');
  const moreChevron = document.getElementById('more-chevron');
  let isOpen = false;

  if (moreToggle && moreMenu && moreChevron) {
    moreToggle.addEventListener('click', function() {
      isOpen = !isOpen;

      if (isOpen) {
        moreMenu.style.maxHeight = moreMenu.scrollHeight + 'px';
        moreChevron.style.transform = 'rotate(180deg)';
      } else {
        moreMenu.style.maxHeight = '0';
        moreChevron.style.transform = 'rotate(0deg)';
      }
    });
  }

  // Toast notifications
  {% if messages %}
    {% for message in messages %}
      let color;
      switch ("{{ message.tags }}") {
        case "success": color = "#4CAF50"; break;
        case "error": color = "#f44336"; break;
        case "warning": color = "#ff9800"; break;
        case "info": color = "#2196F3"; break;
        case "debug": color = "#9E9E9E"; break;
        default: color = "#323232";
      }
      Toastify({
        text: "{{ message|escapejs }}",
        duration: 4000,
        gravity: "top",
        position: "right",
        backgroundColor: color,
        close: true,
        stopOnFocus: true
      }).showToast();
    {% endfor %}
  {% endif %}
});
</script>
</body>
</html>
